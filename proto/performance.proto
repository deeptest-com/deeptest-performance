syntax = "proto3";
package proto;
option go_package = "/proto";

service PerformanceService {
  rpc Exec(stream PerformanceExecReq) returns (stream PerformanceExecResult){};
}

message Processor {
  string name = 1;
}

message Scenario {
  string name = 1;
  repeated Processor processors = 2;
  int32 dur       = 3;
}

message PerformanceExecReq {
  string uuid = 1;
  string title = 2;
  int32 vus = 3;
  int32 dur = 4;
  repeated Scenario scenarios = 5;

  string nsqServerAddress = 6;
  string nsqLookupAddress = 7;
}

message PerformanceExecResult {
  string uuid = 1;
  int32 vuId = 2;

  string status = 3;
  int32 duration = 4;
  string msg = 5;

  string instruction = 6;
}
